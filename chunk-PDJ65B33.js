import{a as W,b as z,c as D,d as F,e as j}from"./chunk-DYVS3EEU.js";import{B as p,C as o,D as i,Da as O,Fa as S,Ga as w,Ha as N,Ia as T,J as u,Ja as k,K as C,Na as I,Oa as E,Pa as R,R as r,S as _,T as g,U as f,V as b,_ as v,aa as x,ea as P,r as d,s as c,u as M,y}from"./chunk-OEL62PIF.js";import{f as h}from"./chunk-RW4GY4BD.js";function V(s,l){if(s&1&&(o(0,"div",14),r(1),i()),s&2){let B=C();d(),_(B.errorMessage)}}var U=(()=>{let l=class l{constructor(t,e,n){this.router=t,this.otpService=e,this.toastController=n,this.countryCode="+91",this.mobileNumber="",this.errorMessage=""}ngOnInit(){}validateMobileNumber(){let e={"+91":/^[6-9]\d{9}$/,"+1":/^\d{10}$/,"+44":/^\d{10}$/,"+61":/^\d{9}$/,"+81":/^\d{10}$/}[this.countryCode];return e?e.test(this.mobileNumber):!1}validateInput(t){let e=t.charCode||t.keyCode;e>=48&&e<=57||e>=96&&e<=105||e===8||t.preventDefault()}showToast(t,e="danger"){return h(this,null,function*(){yield(yield this.toastController.create({message:t,duration:2e3,color:e,position:"top"})).present()})}sendOtp(){if(this.errorMessage="",!this.mobileNumber){this.errorMessage="Please enter your mobile number.";return}if(!this.validateMobileNumber()){this.errorMessage="Please enter a valid mobile number.";return}let t=this.countryCode+this.mobileNumber;this.otpService.sendOtp(t).subscribe({next:()=>{this.showToast("OTP sent successfully!","success").then(()=>{setTimeout(()=>{this.router.navigate(["/otp"],{state:{mobile:t}})},2e3)})},error:()=>{this.showToast("Failed to send OTP. Please try again.")}})}};l.\u0275fac=function(e){return new(e||l)(c(P),c(j),c(D))},l.\u0275cmp=M({type:l,selectors:[["app-register"]],decls:22,vars:4,consts:[[1,"ion-padding",3,"fullscreen"],[1,"form-container"],[1,"page-title"],[1,"instruction"],[1,"phone-input-wrapper"],[1,"country-select",3,"ngModelChange","ngModel"],["value","+91"],["value","+1"],["value","+44"],["value","+61"],["value","+81"],["type","tel","placeholder","Mobile number","inputmode","numeric","pattern","[0-9]*",1,"mobile-input",3,"ngModelChange","keydown","ngModel"],["class","error-message",4,"ngIf"],["expand","block","color","primary",3,"click"],[1,"error-message"]],template:function(e,n){e&1&&(o(0,"ion-content",0)(1,"div",1)(2,"h1",2),r(3,"Register"),i(),o(4,"p",3),r(5,"Enter your mobile number"),i(),o(6,"div",4)(7,"select",5),b("ngModelChange",function(a){return f(n.countryCode,a)||(n.countryCode=a),a}),o(8,"option",6),r(9,"+91"),i(),o(10,"option",7),r(11,"+1"),i(),o(12,"option",8),r(13,"+44"),i(),o(14,"option",9),r(15,"+61"),i(),o(16,"option",10),r(17,"+81"),i()(),o(18,"input",11),b("ngModelChange",function(a){return f(n.mobileNumber,a)||(n.mobileNumber=a),a}),u("keydown",function(a){return n.validateInput(a)}),i()(),y(19,V,2,1,"div",12),o(20,"ion-button",13),u("click",function(){return n.sendOtp()}),r(21,"Send OTP"),i()()()),e&2&&(p("fullscreen",!0),d(7),g("ngModel",n.countryCode),d(11),g("ngModel",n.mobileNumber),d(),p("ngIf",n.errorMessage))},dependencies:[x,v,E,T,k,O,N,S,I,w,R,F,W,z],styles:[".form-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;max-width:400px;margin:0 auto;padding-top:4rem;padding-left:1rem;padding-right:1rem}.page-title[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:#000;text-align:left;margin-bottom:.25rem;line-height:1.2}.instruction[_ngcontent-%COMP%]{color:#000;font-size:14px;text-align:left;margin-bottom:.5rem;line-height:1.2}.phone-input-wrapper[_ngcontent-%COMP%]{display:flex;background:#000;border:1px solid #ccc;border-radius:8px;overflow:hidden}.country-select[_ngcontent-%COMP%]{border:none;background:#fff;padding:0 8px;font-size:16px;color:#000}.mobile-input[_ngcontent-%COMP%]{flex:1;border:none;padding:12px;font-size:16px;color:#000;background:#fff}.country-select[_ngcontent-%COMP%]:focus, .mobile-input[_ngcontent-%COMP%]:focus{outline:none}.error-message[_ngcontent-%COMP%]{color:red;font-size:14px;margin-top:-.5rem;margin-bottom:.5rem;text-align:left}[_nghost-%COMP%]{--ion-background-color: #ffffff}ion-content[_ngcontent-%COMP%]{--background: #ffffff}"]});let s=l;return s})();export{U as a};
